<div class="progress-widget">
  <!-- 진행바 4개 -->
  <div class="bar-row">
    <div class="bar"><div class="fill" id="year"></div></div>
    <div class="label">Year: <span id="yearText"></span>%</div>
  </div>

  <div class="bar-row">
    <div class="bar"><div class="fill" id="month"></div></div>
    <div class="label">Month: <span id="monthText"></span>%</div>
  </div>

  <div class="bar-row">
    <div class="bar"><div class="fill" id="week"></div></div>
    <div class="label">Week: <span id="weekText"></span>%</div>
  </div>

  <div class="bar-row">
    <div class="bar"><div class="fill" id="day"></div></div>
    <div class="label">Day: <span id="dayText"></span>%</div>
  </div>

  <!-- ❤️ 하트바 -->
  <div class="heart-row">
    <div class="heart-bar" id="heartBar"></div>
  </div>
</div>

<style>
/* 전체 박스 */
.progress-widget {
  width: 360px;
  font-family: 'Courier New', monospace;
  background: transparent;
  color: #000;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* 바 + 라벨을 가로로 배치 */
.bar-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* 바 스타일 */
.bar {
  position: relative;
  width: 260px;
  height: 14px;
  background: #fff;
  border: 2px solid #000;
  border-radius: 8px;
  overflow: hidden;
}

.fill {
  background: #000;
  height: 100%;
  width: 0%;
  border-radius: 8px;
  transition: width 0.6s ease;
}

/* 텍스트 라벨 */
.label {
  font-size: 12px;
  width: 85px;
  color: #000;
  line-height: 1;
  text-align: left;
  display: flex;
  justify-content: flex-start;
}

/* ❤️ 하트 줄 - 바 기준으로 왼쪽 정렬 */
.heart-row {
  display: flex;
  justify-content: flex-start;
  margin-top: 8px;
}

.heart-bar {
  text-align: center;
  font-size: 20px;
  background: transparent;
}
</style>

<script>
function updateProgress() {
  const now = new Date();

  // 연도
  const startYear = new Date(now.getFullYear(), 0, 1);
  const endYear = new Date(now.getFullYear() + 1, 0, 1);
  const yearProgress = ((now - startYear) / (endYear - startYear)) * 100;

  // 월
  const startMonth = new Date(now.getFullYear(), now.getMonth(), 1);
  const endMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
  const monthProgress = ((now - startMonth) / (endMonth - startMonth)) * 100;

  // 주
  const dayOfWeek = now.getDay(); // 0 ~ 6
  const weekProgress = ((dayOfWeek * 24 + now.getHours()) / (7 * 24)) * 100;

  // 일
  const dayProgress = ((now.getHours() * 60 + now.getMinutes()) / (24 * 60)) * 100;

  // 값 적용
  document.getElementById('year').style.width = yearProgress + "%";
  document.getElementById('month').style.width = monthProgress + "%";
  document.getElementById('week').style.width = weekProgress + "%";
  document.getElementById('day').style.width = dayProgress + "%";

  document.getElementById('yearText').innerText = yearProgress.toFixed(1);
  document.getElementById('monthText').innerText = monthProgress.toFixed(1);
  document.getElementById('weekText').innerText = weekProgress.toFixed(1);
  document.getElementById('dayText').innerText = dayProgress.toFixed(1);

  // ❤️ 하트
  const todaySeed = now.getFullYear() * 1000 + now.getMonth() * 50 + now.getDate();
  const random = Math.sin(todaySeed) * 10000;
  const heartCount = Math.floor((random - Math.floor(random)) * 10) + 1;
  const hearts = '❤️'.repeat(heartCount);
  document.getElementById('heartBar').innerHTML = hearts;
}

setInterval(updateProgress, 1000);
updateProgress();
</script>
